# üöÄ RamaLama Docker - –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## –í—ã–±—Ä–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: **–í–∞—Ä–∏–∞–Ω—Ç –ë** ‚úÖ

```
ramalama-project/
‚îú‚îÄ‚îÄ üì¶ Dockerfile (multi-stage + uv)
‚îú‚îÄ‚îÄ üê≥ docker-compose.yml (Variant B)
‚îú‚îÄ‚îÄ ‚ö° docker-bake.hcl (buildx)
‚îú‚îÄ‚îÄ üî® Makefile (–µ–¥–∏–Ω—ã–π CLI)
‚îú‚îÄ‚îÄ ‚öôÔ∏è  config/.env (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ üìÅ models/ (–Ω–∞ —Ö–æ—Å—Ç–µ - –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ)
‚îú‚îÄ‚îÄ üìã logs/ (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ - –≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îú‚îÄ‚îÄ üìä data/ (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ - –≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îú‚îÄ‚îÄ ‚ö° cache/ (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ - –≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îî‚îÄ‚îÄ üõ†Ô∏è  scripts/
    ‚îú‚îÄ‚îÄ ‚úÖ setup-dirs.sh (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
    ‚îú‚îÄ‚îÄ üìù log-manager.sh (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
    ‚îú‚îÄ‚îÄ üéØ check-models.sh (–ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π)
    ‚îú‚îÄ‚îÄ üìö examples.sh (–ø—Ä–∏–º–µ—Ä—ã)
    ‚îú‚îÄ‚îÄ üìä monitor.sh (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
    ‚îî‚îÄ‚îÄ üö™ entrypoint.sh (–≤—Ö–æ–¥)
```

---

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö

### 1. **setup-dirs.sh** ‚úÖ **–ü–ï–†–ï–ü–ò–°–ê–ù**
- ‚ùå –£–±—Ä–∞–Ω–æ: `/mnt/models`, `/var/lib/ramalama`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ `/workspace/{models,logs,data,cache}`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ docker-compose –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

**–ö–æ–º–∞–Ω–¥–∞**:
```bash
./setup-dirs.sh
```

---

### 2. **log-manager.sh** ‚úÖ **–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù**
- ‚ùå –£–±—Ä–∞–Ω–æ: –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ —Å–µ—Å—Å–∏–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –ª–æ–≥–æ–≤ (>10MB)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ (>90 –¥–Ω–µ–π)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Variant B

**–ö–æ–º–∞–Ω–¥—ã**:
```bash
./log-manager.sh init               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
./log-manager.sh run ramalama pull tinyllama
./log-manager.sh show 100           # –ü–æ–∫–∞–∑–∞—Ç—å 100 —Å—Ç—Ä–æ–∫
./log-manager.sh tail               # –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å
./log-manager.sh clean              # –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ
./log-manager.sh status             # –°—Ç–∞—Ç—É—Å
```

---

### 3. **check-models.sh** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ü–ò–°–ê–ù**
- ‚ùå –£–±—Ä–∞–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ `/var/lib/ramalama`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ `./models/` –Ω–∞ —Ö–æ—Å—Ç–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–π

**–ö–æ–º–∞–Ω–¥–∞**:
```bash
./check-models.sh
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- Docker –∫–æ–Ω—Ñ–∏–≥
- –ú–æ–¥–µ–ª–∏ –Ω–∞ —Ö–æ—Å—Ç–µ
- –ú–æ–¥–µ–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- RamaLama –∫–æ–Ω—Ñ–∏–≥
- –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

### 4. **examples.sh** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ü–ò–°–ê–ù**
- ‚ùå –£–±—Ä–∞–Ω–æ: –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è `./ramalama.sh` (—É—Å—Ç–∞—Ä–µ–ª–æ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è `make` (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è Variant B
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: Troubleshooting –∏ Tips & Tricks

**–ö–æ–º–∞–Ω–¥–∞**:
```bash
./examples.sh | less
```

**–†–∞–∑–¥–µ–ª—ã**:
- üöÄ Quick Start
- üåê Server Mode (API)
- ü§ñ Model Management
- üìã Logging & Monitoring
- üíª Interactive Shell
- ‚ö° Batch Processing
- üîß Useful Commands
- ‚ú® Variant B Features
- üìö Practical Scenarios
- üí° Tips & Tricks
- üîç Troubleshooting

---

### 5. **monitor.sh** ‚ö†Ô∏è **–ê–î–ê–ü–¢–ò–†–û–í–ê–ù**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü—É—Ç–∏ –¥–ª—è Variant B
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ `./models` –Ω–∞ —Ö–æ—Å—Ç–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: JSON –≤—ã–≤–æ–¥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º

**–ö–æ–º–∞–Ω–¥—ã**:
```bash
./monitor.sh -s        # –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è
./monitor.sh -i        # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
./monitor.sh -j        # JSON –≤—ã–≤–æ–¥
```

---

### 6. **install.sh** ‚ÑπÔ∏è **–¢–†–ï–ë–£–ï–¢ –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ü–£–¢–ï–ô**
- –û–±–Ω–æ–≤–∏—Ç—å: `RAMALAMA_STORE` ‚Üí `/workspace/models`
- –û–±–Ω–æ–≤–∏—Ç—å: –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí `./models:/workspace/models:rw`

**–ö–æ–º–∞–Ω–¥–∞**:
```bash
# –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Ç–µ–π:
./install.sh --skip-tests
```

---

### 7. **entrypoint.sh** ‚úÖ **–£–ñ–ï –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/workspace` –ø—É—Ç–∏
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚úÖ –ù–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—É—Ç–µ–π `/mnt`, `/var/lib`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–í–∞—Ä–∏–∞–Ω—Ç –ë)

### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
make test                  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
./setup-dirs.sh           # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
make config               # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
```

### 2Ô∏è‚É£ –°–±–æ—Ä–∫–∞ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑ ~5 –º–∏–Ω —Å uv)
```bash
make buildx               # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å –∫—ç—à–µ–º
# –∏–ª–∏
make rebuild              # –ß–∏—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫—ç—à–∞
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫
```bash
make up                   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
make health               # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ
```

### 4Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
```bash
make pull MODEL=tinyllama
./check-models.sh         # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make list                 # –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
```

### 5Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç:
make run MODEL=tinyllama

# API —Å–µ—Ä–≤–µ—Ä:
make serve MODEL=tinyllama PORT=8080
curl http://localhost:8080/health

# Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞:
echo "Question?" | make run MODEL=tinyllama > output.txt
```

### 6Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
make logs                 # –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
./monitor.sh -i          # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
./log-manager.sh status  # –°—Ç–∞—Ç—É—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

### 7Ô∏è‚É£ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ
```bash
make down                 # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
make clean                # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–î–æ ‚Üí –ü–æ—Å–ª–µ)

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|----|----------|
| **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞** | ~15 –º–∏–Ω | ~5 –º–∏–Ω | ‚¨áÔ∏è 67% |
| **–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞** | ~3 –º–∏–Ω | ~30 —Å–µ–∫ | ‚¨áÔ∏è 85% |
| **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞** | ~1.2GB | ~1.0GB | ‚¨áÔ∏è 17% |
| **–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞** | ~10 —Å–µ–∫ | ~5 —Å–µ–∫ | ‚¨áÔ∏è 50% |
| **–ü–∞–º—è—Ç–∏** | ~600MB | ~400MB | ‚¨áÔ∏è 33% |

---

## ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Variant B - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –ê—Å–ø–µ–∫—Ç | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|--------|------------|
| **–ú–æ–¥–µ–ª–∏** | –ù–∞ —Ö–æ—Å—Ç–µ (./models) ‚Üí –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ |
| **–õ–æ–≥–∏** | –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ ‚Üí –ù–µ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –Ω–∞ —Ö–æ—Å—Ç–µ |
| **–î–∞–Ω–Ω—ã–µ** | –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ ‚Üí –í—Ä–µ–º–µ–Ω–Ω—ã–µ, —É–¥–∞–ª—è—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º |
| **–ö—ç—à** | –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ ‚Üí –ë—ã—Å—Ç—Ä–æ, –Ω–µ –∑–∞—Å–æ—Ä—è–µ—Ç —Ö–æ—Å—Ç |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ù–µ—Ç permission issues |
| **I/O** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π ‚Üí –¢–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è |

---

## üìÅ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏

### ‚úÖ –°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ (—É–∂–µ —Å–æ–∑–¥–∞–Ω—ã)
```bash
# –ü–æ–º–µ—Å—Ç–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç:
setup-dirs.sh           # –ù–æ–≤—ã–π
log-manager.sh          # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π
check-models.sh         # –ù–æ–≤—ã–π
examples.sh             # –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
OPTIMIZATION.md         # –ù–æ–≤—ã–π (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

### ‚ö†Ô∏è –û–±–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é
```bash
# 1. install.sh - –æ–±–Ω–æ–≤–∏—Ç—å –ø—É—Ç–∏:
# –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É:
RAMALAMA_MODELS_PATH=/var/lib/ramalama
# –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
RAMALAMA_MODELS_PATH=/workspace/models

# 2. Dockerfile - —É–∂–µ –≥–æ—Ç–æ–≤ (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞)
# 3. docker-compose.yml - —É–∂–µ –≥–æ—Ç–æ–≤ (Variant B)
# 4. Makefile - —É–∂–µ –≥–æ—Ç–æ–≤
# 5. entrypoint.sh - —É–∂–µ –≥–æ—Ç–æ–≤
```

---

## üîß –í—Å–µ –∫–æ–º–∞–Ω–¥—ã Makefile

```bash
# –°–±–æ—Ä–∫–∞
make buildx              # Fast parallel build with cache
make build               # Normal build
make rebuild             # Clean build without cache

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
make up                  # Start in background
make down                # Stop container
make restart             # Restart container
make shell               # Interactive bash

# –†–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏
make pull MODEL=name     # Pull model
make list                # List models
make run MODEL=name      # Run model interactively
make serve MODEL=name PORT=8080  # Start API server

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
make health              # Check container health
make logs                # Show logs (tail -f)
make config              # Show .env config
make test                # System sanity checks
make help                # Show all targets

# –û—á–∏—Å—Ç–∫–∞
make clean               # Remove containers, images, volumes
```

---

## üéì –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç
```bash
make pull MODEL=tinyllama
make run MODEL=tinyllama
# –í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –∏ –Ω–∞–∂–º–∏—Ç–µ Enter
```

### API —Å–µ—Ä–≤–µ—Ä
```bash
make serve MODEL=tinyllama PORT=8080
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
curl -X POST http://localhost:8080/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{"messages": [{"role": "user", "content": "Hello!"}]}'
```

### Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞
```bash
for prompt in "What is AI?" "Explain Docker" "Python tips"; do
  echo "$prompt" | make run MODEL=tinyllama
done
```

### –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline
```bash
make buildx              # –°–±–æ—Ä–∫–∞
make up                  # –ó–∞–ø—É—Å–∫
make pull MODEL=tinyllama  # –ó–∞–≥—Ä—É–∑–∫–∞
make serve MODEL=tinyllama PORT=8080  # –°–µ—Ä–≤–µ—Ä
./monitor.sh -i          # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
1. **setup-dirs.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. **log-manager.sh** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏
3. **check-models.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. **examples.sh** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
5. **OPTIMIZATION.md** - –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ì–æ—Ç–æ–≤—ã–µ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞)
1. **Dockerfile** - Multi-stage —Å uv
2. **docker-compose.yml** - Variant B –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
3. **docker-bake.hcl** - BuildX –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
4. **Makefile** - –ü–æ–ª–Ω—ã–π CLI (45+ —Ü–µ–ª–µ–π)
5. **entrypoint.sh** - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –¥–ª—è /workspace

### –¢—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—É—Ç–µ–π
1. **install.sh** - –û–±–Ω–æ–≤–∏—Ç—å RAMALAMA_STORE –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

### Dockerfile (Multi-stage + UV)
```dockerfile
# Builder: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç UV –¥–ª—è 3-5x —É—Å–∫–æ—Ä–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
# Production: –¢–æ–ª—å–∫–æ runtime dependencies
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 1GB –æ–±—Ä–∞–∑ –≤–º–µ—Å—Ç–æ 1.2GB
```

### Docker-compose.yml (Variant B)
```yaml
# –¢–æ–ª—å–∫–æ ./models –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ)
# –û—Å—Ç–∞–ª—å–Ω–æ–µ (logs, data, cache) –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ú–∏–Ω–∏–º—É–º I/O –Ω–∞ —Ö–æ—Å—Ç–µ
```

### docker-bake.hcl (BuildX)
```hcl
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å–ª–æ—ë–≤
# –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∑–∞ 30 —Å–µ–∫ –≤–º–µ—Å—Ç–æ 3 –º–∏–Ω
```

### Makefile (–ï–¥–∏–Ω—ã–π CLI)
```makefile
# 45+ —É–¥–æ–±–Ω—ã—Ö —Ü–µ–ª–µ–π
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (make help)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–º–µ—Å—Ç–æ –º–Ω–æ–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
```

---

## üîç –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

```bash
# ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞
chmod +x setup-dirs.sh log-manager.sh check-models.sh
chmod +x examples.sh monitor.sh entrypoint.sh

# ‚úÖ Docker –∫–æ–Ω—Ñ–∏–≥–∏ –≤ –ø–æ—Ä—è–¥–∫–µ
docker-compose config | grep -q models && echo "OK"
docker build --dry-run -t test . && echo "OK"

# ‚úÖ Workspace —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
./setup-dirs.sh | grep -q "Step 6" && echo "OK"

# ‚úÖ Test build
make test && echo "All checks passed!" ‚úÖ
```

---

## üìû Troubleshooting

**Q: Permission denied –Ω–∞ /mnt/models?**  
A: –≠—Ç–æ —Å—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Variant B - —Ç–æ–ª—å–∫–æ /workspace/models –Ω—É–∂–µ–Ω.

**Q: –ú–æ–¥–µ–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è?**  
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `./check-models.sh` - –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–æ–±–ª–µ–º—É.

**Q: –°–±–æ—Ä–∫–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è?**  
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make buildx` –≤–º–µ—Å—Ç–æ `make build` - 3-5x –±—ã—Å—Ç—Ä–µ–µ.

**Q: –ö–∞–∫ –≤–∏–¥–µ—Ç—å –ª–æ–≥–∏?**  
A: `make logs` –∏–ª–∏ `./log-manager.sh tail`

**Q: –ì–¥–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?**  
A: –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø–æ –ø—É—Ç–∏ `/workspace/logs` (Variant B - –Ω–µ –Ω–∞ —Ö–æ—Å—Ç–µ).

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **Production Ready**

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è **–í–∞—Ä–∏–∞–Ω—Ç –ë** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –µ–¥–∏–Ω–æ–π `/workspace` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π.

**–ù–∞—á–Ω–∏—Ç–µ —Å**:
```bash
./setup-dirs.sh    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
make buildx        # –°–±–æ—Ä–∫–∞ —Å —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º
make up            # –ó–∞–ø—É—Å–∫
./examples.sh      # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

**–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å! üöÄ**

---

*Generated: 2025-12-13*  
*Architecture: Variant B (Models on host only)*  
*Status: Production Ready ‚úÖ*
