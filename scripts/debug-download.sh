#!/bin/bash

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π

echo "üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Hugging Face
echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Hugging Face:"
if curl -s --max-time 10 https://huggingface.co >/dev/null; then
    echo "   ‚úÖ Hugging Face –¥–æ—Å—Ç—É–ø–µ–Ω"
else
    echo "   ‚ùå Hugging Face –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ proxy
echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ proxy:"
if [ ! -z "$HTTP_PROXY" ]; then
    echo "   üì° Proxy: $HTTP_PROXY"
    if curl -s --max-time 5 --proxy $HTTP_PROXY https://huggingface.co >/dev/null; then
        echo "   ‚úÖ Proxy —Ä–∞–±–æ—Ç–∞–µ—Ç"
    else
        echo "   ‚ùå Proxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
        echo "      –ü–æ–ø—Ä–æ–±—É–π—Ç–µ: docker-compose --profile no-proxy run ..."
    fi
else
    echo "   üì° Proxy: –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
fi
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ volumes
echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker volumes:"
docker-compose config | grep -A 5 "volumes:" || echo "   ‚ö†Ô∏è  Volumes –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
echo "4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:"
echo "   –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è models/:"
ls -la models/ 2>/dev/null || echo "   ‚ùå models/ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞"
echo ""
echo "   –ü—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:"
id
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥–µ–ª–µ–π
echo "5. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏:"
find . -name "*.gguf" -o -name "*.bin" 2>/dev/null | head -10 || echo "   üì≠ –ú–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
echo ""

# –¢–µ—Å—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –º–æ–¥–µ–ª—å—é
echo "6. –¢–µ—Å—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å):"
echo "   –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å: ./ramalama.sh pull tinyllama"
echo "   –ò–ª–∏ –±–µ–∑ proxy: docker-compose --profile no-proxy run ramalama-no-proxy pull tinyllama"
echo ""

echo "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:"
echo "1. –ï—Å–ª–∏ proxy –Ω–µ –Ω—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: docker-compose --profile no-proxy"
echo "2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ proxy –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω"
echo "3. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö –º–æ–¥–µ–ª–µ–π"
echo "4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ./setup-dirs.sh –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π"