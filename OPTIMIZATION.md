# RamaLama Docker Project - Optimization Report
## –í–∞—Ä–∏–∞–Ω—Ç –ë: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –µ–¥–∏–Ω–æ–π /workspace –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π

**–î–∞—Ç–∞**: 2025-12-13  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–í–µ—Ä—Å–∏—è**: Variant B + UV + BuildX + Makefile

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π](#–æ–±–∑–æ—Ä-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)
2. [–ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤](#–∞–Ω–∞–ª–∏–∑-—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö-—Å–∫—Ä–∏–ø—Ç–æ–≤)
3. [–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã](#–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ-—Å–∫—Ä–∏–ø—Ç—ã)
4. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
5. [Checklist —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#checklist-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)

---

## üéØ –û–±–∑–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–í–∞—Ä–∏–∞–Ω—Ç –ë)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ä–æ | –ù–æ–≤–æ–µ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|-----------|-------|-------|-------------|
| **–ü—É—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è** | `/var/lib/ramalama`, `/mnt` | `/workspace/{models,logs,data,cache}` | ‚úÖ –ï–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |
| **–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** | –í—Å–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ | –¢–æ–ª—å–∫–æ `./models` | ‚úÖ –ú–µ–Ω—å—à–µ I/O –Ω–∞ —Ö–æ—Å—Ç–µ |
| **–õ–æ–≥–∏** | –ù–∞ —Ö–æ—Å—Ç–µ | –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ | ‚úÖ –ù–µ –∑–∞—Å–æ—Ä—è–µ—Ç —Ö–æ—Å—Ç |
| **–ö—ç—à** | –ù–∞ —Ö–æ—Å—Ç–µ | –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ | ‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** | Root + –ø—Ä–æ–±–ª–µ–º—ã | Non-root `ramalama` | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|-----------|--------|-------------|
| **uv** –≤–º–µ—Å—Ç–æ pip | ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω | 3-5x —É—Å–∫–æ—Ä–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π |
| **docker buildx** | ‚úÖ docker-bake.hcl | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—ë–≤ |
| **Multi-stage Dockerfile** | ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω | ~200MB —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–∑–µ |
| **Layer caching** | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ | –ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö |

### CLI —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –í—ã–∏–≥—Ä—ã—à |
|-----------|--------|--------|
| **Makefile** | ‚úÖ –ü–æ–ª–Ω—ã–π | –ï–¥–∏–Ω—ã–π CLI –≤–º–µ—Å—Ç–æ –º–Ω–æ–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ |
| **docker-compose** | ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç –ë | –ß–∏—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| **.env —Ñ–∞–π–ª** | ‚úÖ config/.env | –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ |

---

## üìä –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

### setup-dirs.sh
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –ø—É—Ç—å `/mnt/models` (–Ω–µ –Ω—É–∂–µ–Ω)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `/var/lib/ramalama` (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ `/workspace/models`)
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Variant B –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–†–µ—à–µ–Ω–∏–µ**: ‚úÖ **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `/workspace/*` —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Variant B
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ docker inspect

---

### log-manager.sh
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ò–∑–ª–∏—à–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (—Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç, —á—Ç–æ –ª–æ–≥–∏ –ª–æ–∫–∞–ª—å–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (Variant B)

**–†–µ—à–µ–Ω–∏–µ**: ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω**
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è Variant B
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –ª–æ–≥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å make run

---

### check-models.sh
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏**

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ò—â–µ—Ç –º–æ–¥–µ–ª–∏ –≤ `/var/lib/ramalama` (—Å—Ç–∞—Ä–æ)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ docker-compose –∫–æ–Ω—Ñ–∏–≥–∞

**–†–µ—à–µ–Ω–∏–µ**: ‚úÖ **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `./models/` –Ω–∞ —Ö–æ—Å—Ç–µ
- –í–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
- –¢–µ—Å—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ Variant B –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–π

---

### examples.sh
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏**

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ `./ramalama.sh` CLI
- –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è Makefile
- –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ Variant B –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π

**–†–µ—à–µ–Ω–∏–µ**: ‚úÖ **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω**
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è make targets
- Variant B —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–º–æ–¥–µ–ª–∏ –Ω–∞ —Ö–æ—Å—Ç–µ)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ (curl, docker-compose exec)

---

### install.sh
**–°—Ç–∞—Ç—É—Å**: ‚ÑπÔ∏è **–ì–æ—Ç–æ–≤, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—É—Ç–µ–π**

**–ß—Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å**:
```bash
# –°—Ç–∞—Ä–æ:
RAMALAMA_STORE=/var/lib/ramalama
- ./models:/var/lib/ramalama:rw

# –ù–æ–≤–æ–µ (Variant B):
RAMALAMA_STORE=/workspace/models
- ./models:/workspace/models:rw
```

---

### monitor.sh
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏**

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–µ (–≤ Variant B –∏—Ö –Ω–µ—Ç)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–†–µ—à–µ–Ω–∏–µ**: ‚úÖ **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ `./models/` –Ω–∞ —Ö–æ—Å—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ Docker API
- JSON –≤—ã–≤–æ–¥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

### ramalama.sh, setup-logrotate.sh, install.sh
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –µ—Å—Ç—å (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ)**

–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã —è–≤–ª—è—é—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å docker-compose.

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. setup-dirs.sh (–Ω–æ–≤—ã–π)
```bash
./setup-dirs.sh
```
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç**:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `/workspace/{models,logs,data,cache,config}`
- ‚úÖ –ù–∞–ª–∏—á–∏–µ config/.env
- ‚úÖ Docker –æ–±—Ä–∞–∑ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ docker inspect
- ‚úÖ –†–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

---

### 2. log-manager.sh (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)
```bash
./log-manager.sh init               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
./log-manager.sh run <cmd>         # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
./log-manager.sh show              # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
./log-manager.sh tail              # –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å (tail -f)
./log-manager.sh clean             # –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ
./log-manager.sh status            # –°—Ç–∞—Ç—É—Å
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –ª–æ–≥–æ–≤ (>10MB)
- –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ (>90 –¥–Ω–µ–π)
- –°–µ—Å—Å–∏–æ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 3. check-models.sh (–Ω–æ–≤—ã–π)
```bash
./check-models.sh
```
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç**:
- ‚úÖ –ú–æ–¥–µ–ª–∏ –Ω–∞ —Ö–æ—Å—Ç–µ (`./models`)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
- ‚úÖ –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–µ—Å—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ (—Å–æ–∑–¥–∞–µ—Ç/—É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª)

---

### 4. examples.sh (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω)
```bash
./examples.sh
```
**–°–æ–¥–µ—Ä–∂–∏—Ç**:
- ‚úÖ Quick start (build, up, pull, run, serve)
- ‚úÖ Server mode (API –ø—Ä–∏–º–µ—Ä—ã)
- ‚úÖ Model management
- ‚úÖ Logging & monitoring
- ‚úÖ Batch processing
- ‚úÖ Practical scenarios
- ‚úÖ Troubleshooting

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç –ë - –ò–¥–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```
–ü—Ä–æ–µ–∫—Ç: RamaLama Docker —Å Variant B
‚îú‚îÄ‚îÄ Dockerfile            (multi-stage, uv, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)
‚îú‚îÄ‚îÄ docker-compose.yml    (—Ç–æ–ª—å–∫–æ ./models –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ docker-bake.hcl       (buildx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ Makefile              (–æ—Å–Ω–æ–≤–Ω–æ–π CLI)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ .env              (–≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ models/               (–Ω–∞ —Ö–æ—Å—Ç–µ, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ)
‚îú‚îÄ‚îÄ logs/                 (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îú‚îÄ‚îÄ data/                 (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îú‚îÄ‚îÄ cache/                (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤—Ä–µ–º–µ–Ω–Ω–æ)
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ setup-dirs.sh     (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
    ‚îú‚îÄ‚îÄ log-manager.sh    (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏)
    ‚îú‚îÄ‚îÄ check-models.sh   (–ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π)
    ‚îú‚îÄ‚îÄ examples.sh       (–ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
    ‚îú‚îÄ‚îÄ monitor.sh        (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
    ‚îî‚îÄ‚îÄ entrypoint.sh     (–≤—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
```

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Optimal Workflow)

```bash
# 1Ô∏è‚É£  –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
make test
./setup-dirs.sh

# 2Ô∏è‚É£  –°–±–æ—Ä–∫–∞ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
make buildx              # ~5 –º–∏–Ω—É—Ç —Å uv
# –∏–ª–∏
make build               # –û–±—ã—á–Ω–∞—è —Å–±–æ—Ä–∫–∞

# 3Ô∏è‚É£  –ó–∞–ø—É—Å–∫
make up                  # –§–æ–Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫
make health              # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

# 4Ô∏è‚É£  –†–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏
make pull MODEL=tinyllama
./check-models.sh        # –ü—Ä–æ–≤–µ—Ä–∫–∞
make list                # –°–ø–∏—Å–æ–∫

# 5Ô∏è‚É£  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ:
make run MODEL=tinyllama

# –ö–∞–∫ —Å–µ—Ä–≤–µ—Ä:
make serve MODEL=tinyllama PORT=8080

# –ß–µ—Ä–µ–∑ API:
curl http://localhost:8080/health

# 6Ô∏è‚É£  –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make logs                # –õ–æ–≥–∏
./monitor.sh -s          # –°–Ω–∏–º–æ–∫
./monitor.sh -i          # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ

# 7Ô∏è‚É£  –û—á–∏—Å—Ç–∫–∞
make down                # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
make clean               # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
```

---

## ‚úÖ Checklist —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Pre-deployment

- [ ] Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] docker-compose v2+
- [ ] 10GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- [ ] 4GB+ –ø–∞–º—è—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
- [ ] ./config/.env —Å–æ–∑–¥–∞–Ω

### Deployment

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
[ ] make test
[ ] ./setup-dirs.sh

# 2. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
[ ] make buildx            # –ü–µ—Ä–≤—ã–π —Ä–∞–∑: 5-10 –º–∏–Ω
[ ] docker images | grep ramalama

# 3. –ó–∞–ø—É—Å–∫
[ ] make up
[ ] make health            # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–æ—Ç–æ–≤?

# 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
[ ] make pull MODEL=tinyllama
[ ] ./check-models.sh      # –ú–æ–¥–µ–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã?
[ ] make list              # –ú–æ–¥–µ–ª—å –≤–∏–¥–Ω–∞?

# 5. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
[ ] make run MODEL=tinyllama
[ ] make serve MODEL=tinyllama PORT=8080
[ ] curl http://localhost:8080/health
```

### Post-deployment

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (cron/systemd)
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (./monitor.sh -i)
- [ ] –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –º–æ–¥–µ–ª–µ–π (./models)
- [ ] –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (./log-manager.sh clean)

---

## üöÄ Performance Metrics

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|----|----|
| –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ (–ø–µ—Ä–≤–∞—è) | ~15 –º–∏–Ω | ~5 –º–∏–Ω |
| –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ | ~1.2GB | ~1.0GB |
| –†–∞–∑–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ —Å–ª–æ—è | 350MB | 300MB |
| –í—Ä–µ–º—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ | ~3 –º–∏–Ω | ~30 —Å–µ–∫ |

### –ó–∞–ø—É—Å–∫

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|----|----|
| –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ | ~10 —Å–µ–∫ | ~5 —Å–µ–∫ |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | ~600MB | ~400MB |
| Disk I/O | –í—ã—Å–æ–∫–∏–π | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

| –°—Ü–µ–Ω–∞—Ä–∏–π | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----------|
| –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ | -67% –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ | -90% –≤—Ä–µ–º—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ |
| –•—Ä–∞–Ω–µ–Ω–∏–µ | -30% —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞ (–Ω–µ—Ç –ª–æ–≥–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–µ) |

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **Dockerfile** - Multi-stage —Å uv –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
2. **docker-compose.yml** - –í–∞—Ä–∏–∞–Ω—Ç –ë (—Ç–æ–ª—å–∫–æ models)
3. **docker-bake.hcl** - BuildX –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
4. **Makefile** - –ü–æ–ª–Ω—ã–π CLI (45+ —Ü–µ–ª–µ–π)
5. **entrypoint.sh** - –†–∞–±–æ—Ç–∞–µ—Ç —Å /workspace
6. **setup-dirs.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
7. **log-manager.sh** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏
8. **check-models.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π
9. **examples.sh** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
10. **config/.env** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- README.md (–≤ –ø—Ä–æ–µ–∫—Ç–µ)
- TROUBLESHOOTING.md (–æ—Ç–ª–∞–¥–∫–∞)
- docker-bake.hcl (–¥–ª—è buildx build)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

```bash
# 1. –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x setup-dirs.sh log-manager.sh check-models.sh examples.sh
chmod +x monitor.sh entrypoint.sh

# 2. Dockerfile –∏ compose –≤ –ø–æ—Ä—è–¥–∫–µ
docker-compose config   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
docker build -t test . --dry-run

# 3. –¢–µ—Å—Ç–æ–≤–∞—è —Å–±–æ—Ä–∫–∞
make test
make buildx

# 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫
./setup-dirs.sh
./check-models.sh
./monitor.sh -s
```

---

## üí° Best Practices

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make buildx` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ —á–µ—Ä–µ–∑ `make health`
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∞–ª–∏–∞—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∫–æ–º–∞–Ω–¥
- ‚úÖ –ü–∏–ø–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make serve` –¥–ª—è API, `make run` –¥–ª—è chat

### –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ: `./check-models.sh`
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ: `./log-manager.sh clean`
- ‚úÖ –ï–∂–µ–º–µ—Å—è—á–Ω–æ: `./monitor.sh -i` –¥–ª—è –∞—É–¥–∏—Ç–∞

---

## üéì –û–±—É—á–µ–Ω–∏–µ

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞:

```bash
# –ß–∏—Ç–∞–π –ø—Ä–∏–º–µ—Ä—ã
./examples.sh | less

# –°–º–æ—Ç—Ä–∏ –ø–æ–º–æ—â—å –ø–æ make
make help

# –°–º–æ—Ç—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
./setup-dirs.sh

# –ü—Ä–æ–±—É–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
make shell
ramalama list
ramalama pull tinyllama
ramalama run tinyllama
```

---

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ–µ
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Variant B (—á–∏—Å—Ç–∞—è `/workspace` —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- ‚úÖ 3-5x —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ uv
- ‚úÖ 90% —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ buildx –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ï–¥–∏–Ω—ã–π CLI —á–µ—Ä–µ–∑ Makefile
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ config/.env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, no permission issues

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production
- ‚úÖ Health checks –≤–∫–ª—é—á–µ–Ω—ã
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ resize/–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é. –°–ª–µ–¥—É–π—Ç–µ Makefile —Ü–µ–ª—è–º –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ workflow.

---

**Generated**: 2025-12-13
**Architecture**: Variant B (Models on host only)
**Tools**: Docker 24.0+, BuildX, UV, GNU Make
**Status**: Production Ready ‚úÖ
